/*! For license information please see editor-current-user.js.LICENSE.txt */
!function(){"use strict";var e={"./packages/packages/libs/editor-current-user/src/api.ts":function(e,r,t){t.r(r),t.d(r,{apiClient:function(){return a}});var s=t("@elementor/http-client");const u="/users/me",n={params:{context:"edit"}},a={get:()=>(0,s.httpService)().get("wp/v2"+u,n).then(e=>responseToUser(e.data)),update:e=>(0,s.httpService)().patch("wp/v2"+u,userToRequest(e))},responseToUser=e=>({suppressedMessages:Object.entries(e.elementor_introduction).filter(([,e])=>e).map(([e])=>e),capabilities:Object.keys(e.capabilities)}),userToRequest=e=>({elementor_introduction:e.suppressedMessages?.reduce((e,r)=>(e[r]=!0,e),{})})},"./packages/packages/libs/editor-current-user/src/ensure-current-user.ts":function(e,r,t){t.r(r),t.d(r,{ensureCurrentUser:function(){return ensureCurrentUser}});var s=t("@elementor/editor-v1-adapters"),u=t("./packages/packages/libs/editor-current-user/src/get-current-user.ts"),n=t("./packages/packages/libs/editor-current-user/src/use-current-user.ts");function ensureCurrentUser({queryClient:e}){return(0,s.registerDataHook)("after","editor/documents/attach-preview",async()=>{try{await e.ensureQueryData({queryKey:[n.EDITOR_CURRENT_USER_QUERY_KEY],queryFn:u.getCurrentUser,retry:!1})}catch{e.setQueryData([n.EDITOR_CURRENT_USER_QUERY_KEY],null)}}),e.getQueryData([n.EDITOR_CURRENT_USER_QUERY_KEY])}},"./packages/packages/libs/editor-current-user/src/get-current-user.ts":function(e,r,t){t.r(r),t.d(r,{getCurrentUser:function(){return getCurrentUser}});var s=t("./packages/packages/libs/editor-current-user/src/api.ts");const getCurrentUser=()=>s.apiClient.get()},"./packages/packages/libs/editor-current-user/src/use-current-user-capabilities.ts":function(e,r,t){t.r(r),t.d(r,{useCurrentUserCapabilities:function(){return useCurrentUserCapabilities}});var s=t("./packages/packages/libs/editor-current-user/src/use-current-user.ts");const useCurrentUserCapabilities=()=>{const{data:e}=(0,s.useCurrentUser)();return{canUser:r=>Boolean(e?.capabilities.includes(r)),capabilities:e?.capabilities}}},"./packages/packages/libs/editor-current-user/src/use-current-user.ts":function(e,r,t){t.r(r),t.d(r,{EDITOR_CURRENT_USER_QUERY_KEY:function(){return n},useCurrentUser:function(){return useCurrentUser}});var s=t("@elementor/query"),u=t("./packages/packages/libs/editor-current-user/src/get-current-user.ts");const n="editor-current-user",useCurrentUser=()=>(0,s.useQuery)({queryKey:[n],queryFn:u.getCurrentUser})},"./packages/packages/libs/editor-current-user/src/use-suppressed-message.ts":function(e,r,t){t.r(r),t.d(r,{useSuppressedMessage:function(){return useSuppressedMessage}});var s=t("./packages/packages/libs/editor-current-user/src/use-current-user.ts"),u=t("./packages/packages/libs/editor-current-user/src/use-update-current-user.ts");const useSuppressedMessage=e=>{const{data:r}=(0,s.useCurrentUser)(),{mutate:t}=(0,u.useUpdateCurrentUser)(),n=!!r?.suppressedMessages.includes(e);return[n,()=>{n||t({suppressedMessages:[...r?.suppressedMessages??[],e]})}]}},"./packages/packages/libs/editor-current-user/src/use-update-current-user.ts":function(e,r,t){t.r(r),t.d(r,{useUpdateCurrentUser:function(){return useUpdateCurrentUser}});var s=t("@elementor/query"),u=t("./packages/packages/libs/editor-current-user/src/api.ts"),n=t("./packages/packages/libs/editor-current-user/src/use-current-user.ts");const useUpdateCurrentUser=()=>{const e=(0,s.useQueryClient)();return(0,s.useMutation)({mutationFn:u.apiClient.update,onSuccess:()=>e.invalidateQueries({queryKey:[n.EDITOR_CURRENT_USER_QUERY_KEY]})})}},"@elementor/editor-v1-adapters":function(e){e.exports=window.elementorV2.editorV1Adapters},"@elementor/http-client":function(e){e.exports=window.elementorV2.httpClient},"@elementor/query":function(e){e.exports=window.elementorV2.query}},r={};function __webpack_require__(t){var s=r[t];if(void 0!==s)return s.exports;var u=r[t]={exports:{}};return e[t](u,u.exports,__webpack_require__),u.exports}__webpack_require__.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(r,{a:r}),r},__webpack_require__.d=function(e,r){for(var t in r)__webpack_require__.o(r,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},__webpack_require__.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};!function(){__webpack_require__.r(t),__webpack_require__.d(t,{ensureCurrentUser:function(){return u.ensureCurrentUser},getCurrentUser:function(){return s.getCurrentUser},useCurrentUserCapabilities:function(){return r.useCurrentUserCapabilities},useSuppressedMessage:function(){return e.useSuppressedMessage}});var e=__webpack_require__("./packages/packages/libs/editor-current-user/src/use-suppressed-message.ts"),r=__webpack_require__("./packages/packages/libs/editor-current-user/src/use-current-user-capabilities.ts"),s=__webpack_require__("./packages/packages/libs/editor-current-user/src/get-current-user.ts"),u=__webpack_require__("./packages/packages/libs/editor-current-user/src/ensure-current-user.ts")}(),(window.elementorV2=window.elementorV2||{}).editorCurrentUser=t}(),window.elementorV2.editorCurrentUser?.init?.();
//# sourceMappingURL=editor-current-user.js.map